<% title='Weight Tracker | Home' %>

    <div class="banner container-fluid text-center text-uppercase bg-dark bg-gradient bg-opacity-10">
        Track your weight daily
    </div>
    <div class="container pt-3 h-50">
        <!-- Error Messages -->
         <div id="errors">
            <div class="row d-flex justify-content-center">
                <div class="col-lg-5">
                    <% if (errors) { %>
                        <div style="color: red;">
                            <ul>
                                <% Object.values(errors).forEach(err=> { %>
                                    <li>
                                        <%= err.message %>
                                    </li>
                                    <% }) %>
                            </ul>
                        </div>
                    <% } %>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <div class="col-lg-5">
                    <% if (validationResults) { %>
                        <div style="color: red;">
                            <ul>
                                <% validationResults.forEach(err=> { %>
                                    <li>
                                        <%= err.msg %>
                                    </li>
                                    <% }) %>
                            </ul>
                        </div>
                    <% } %>
                </div>
            </div>
         </div>
        <div class="row d-flex justify-content-center align-items-center h-50">
            <div class="col-12 col-md-8 col-lg-8 col-xl-6">
                <div class="card  bg-secondary bg-opacity-75 px-2 py-3 border border-light-subtle"
                    style="border-radius: 2rem;">
                    <div class="card bg-light-subtle border-0" style="border-radius: 2rem;">
                        <!-- BMI calculator -->
                        <div class="card-body p-4 text-center" id="BMICalculator">

                            <h2 class="fw-bold text-uppercase mb-3">BMI Calculator</h2>

                            <div class="BMIinput p-3 mb-4 bg-primary text-dark bg-opacity-10 rounded-5 mx-5">
                                <label class="form-label fs-5 fw-bold" for="heightBMI">Height(cm)</label><br>
                                <input type="number" id="heightBMI"
                                    class="bg-transparent border-bottom border-primary" />
                            </div>

                            <div class="BMIinput p-3 mb-4  bg-info text-dark bg-opacity-10 rounded-5 mx-5">
                                <label class="form-label fs-5 fw-bold" for="weightBMI">Weight(kg)</label><br>
                                <input type="number" id="weightBMI"
                                    class="bg-transparent border-bottom border-primary" />
                            </div>

                            <button id="calculate" class="btn btn-primary btn-lg px-5">Calculate BMI</button>

                            <div class="result mt-4">
                                <p class="mb-0 fs-5 fw-bold">Your BMI is : <span id="result"
                                        class="px-3 rounded-pill bg-dark-subtle">00.00</span></p>
                                <p class="comment mt-3"></p>
                            </div>
                        </div>
                        <!-- Sign Up Form  -->
                        <div class="card-body p-4 text-center" id="signUpForm" style="display: none;">
                            <h2 class="text-uppercase text-center mb-5">Create an account</h2>
                            <form action="/signUp" method="post" class="row g-3">

                                <div class="mb-3 col-md-6">
                                    <label for="username" class="form-label fs-5 fw-bold">Name</label>
                                    <input type="text" name="name" class="form-control" id="username">
                                </div>

                                <div class="mb-3  col-md-6">
                                    <label for="profile_picture" class="form-label fs-5 fw-bold">Profile Picture</label>
                                    <input class="form-control" type="file" name="profile_picture" id="profile_picture">
                                </div>

                                <div class="mb-3 col-md-6">
                                    <label for="email" class="form-label fs-5 fw-bold">Email address</label>
                                    <input type="email" name="email" class="form-control" id="email">
                                </div>

                                <div class="mb-3 col-md-6">
                                    <label for="password" class="form-label fs-5 fw-bold">Password</label>
                                    <input type="password" name="password" id="password" class="form-control"
                                        aria-describedby="passwordHelpBlock">
                                    <div id="passwordHelpBlock" class="form-text">
                                        Your password must be at least 6 characters long.
                                    </div>
                                </div>

                                <div class="mb-3 col-md-6">
                                    <label class="form-label fs-5 fw-bold" for="height">Height(cm)</label><br>
                                    <input type="number" name="height" id="height" class="form-control" />
                                </div>

                                <div class="mb-3 col-md-6">
                                    <label class="form-label fs-5 fw-bold" for="initial_weight">Initial
                                        Weight(kg)</label><br>
                                    <input type="number" name="initial_weight" id="initial_weight"
                                        class="form-control" />
                                </div>

                                <div class="d-flex justify-content-center my-5">
                                    <button type="submit" class="btn btn-primary btn-lg px-5">Register</button>
                                </div>
                            </form>
                            <p class="text-center text-muted mt-5 mb-0">Have already an account? <a href="#login-btn"
                                    class="fw-bold text-body" onclick="return showLoginForm()"><u>Login here</u></a></p>
                        </div>
                        <!-- Login Form  -->
                        <div class="card-body p-4 text-center" id="loginForm" style="display: none;">
                            <h2 class="fw-bold mb-2 text-uppercase">Login</h2>
                            <p class="text-white-50 mb-5">Please enter your registered email id and password!</p>
                            <form action="/login" method="post">
                                <div class="mb-3">
                                    <label for="loginEmail" class="form-label fs-5 fw-bold">Email address</label>
                                    <input type="email" name="loginEmail" class="form-control" id="loginEmail">
                                </div>

                                <div class="mb-3">
                                    <label for="loginPassword" class="form-label fs-5 fw-bold">Password</label>
                                    <input type="password" name="loginPassword" id="loginPassword" class="form-control">
                                </div>
                                <div class="d-flex justify-content-center">
                                    <button type="submit" class="btn btn-primary btn-lg px-5">Login</button>
                                </div>
                                <p class="text-center text-muted mt-5 mb-0">No account? <a href="#signUp-btn"
                                        class="fw-bold text-body" onclick="return showSignUpForm()"><u>Sign Up
                                            here</u></a></p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <% if (display) { %>
        <% if (display=='signUpForm' ) { %>
            <script type="text/javascript">
                document.getElementById("signUpForm").style.display = "block";
                document.getElementById("loginForm").style.display = "none";
                document.getElementById("BMICalculator").style.display = "none";
                document.getElementById("errors").style.display="block";
            </script>
            <% } else if (display=='loginForm' ) { %>
                <script type="text/javascript">
                    document.getElementById("loginForm").style.display = "block";
                    document.getElementById("signUpForm").style.display = "none";
                    document.getElementById("BMICalculator").style.display = "none";
                    document.getElementById("errors").style.display="block";
                </script>
                <%}} %>
<script src="/javascripts/homepageScript.js"></script>